{% assign breadcrumb_parts = page.url | remove: "/index.html" | replace: '/','/ ' | split: ' ' %}
{% assign breadcrumb_url = "" %}
{% if breadcrumb_collection == nil %}
{% assign breadcrumb_collection = site.pages %}
{% endif %}
<ul class="breadcrumb">
{% for part in breadcrumb_parts %}
    {% capture breadcrumb_url %}{{ breadcrumb_url }}{{ part }}{% endcapture %}
    {% for sitepage in breadcrumb_collection %}
        {% if sitepage.url == breadcrumb_url %}
            {% if part == breadcrumb_parts.last %}
            <li class="active">{{ sitepage.title }}</li>
            {% else %}
            <li><a href="{{ sitepage.url }}">{{ sitepage.title }}</a></li>
            {% endif %}
        {% endif %}
    {% endfor %}
{% endfor %}
</ul>
